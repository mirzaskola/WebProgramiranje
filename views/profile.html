72 lines (65 sloc)  2.28 KB
  
<div id="page-wrapper">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">User Profile</h1>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
        <div id="profile-container" class="row">

        </div>
        <!-- /.row -->
    </div>
    <!-- /.container-fluid -->
</div>
<!-- /#page-wrapper -->

<script type="text/javascript">
  window.onload=adminSetup();

  (function reloading(){
    if( window.localStorage ){
      if( !localStorage.getItem('firstLoadProfile') ){
        localStorage['firstLoadProfile'] = true;
        window.location.reload();
      }
      else{
        localStorage.removeItem('firstLoadProfile');
      }
    }
  })();

  function adminSetup(){
    if (!window.localStorage.getItem("token")){
      document.getElementById("page-wrapper").style.marginLeft = "0px";
    }
    if(window.localStorage.getItem("token")){
      var user_info = parse_jwt(window.localStorage.getItem("token"));
      if (user_info.r != "ADMIN"){
        document.getElementById("page-wrapper").style.marginLeft = "0px";
      }
    }
  }

  getProfile();

  function getProfile(){
    $.ajax({
         url: "api/user/info",
         type: "GET",
         beforeSend: function(xhr){xhr.setRequestHeader('Authentication', localStorage.getItem("token"));},
         success: function(data){
         
      });
  }

</script>